# Podcast Engine - Environment Variables Configuration

# ============================================================================
# TTS Provider Configuration (Multi-Provider System)
# ============================================================================
# Comma-separated list of TTS providers in priority order
# Available: google, piper, kokoro
# Default: "google,piper,kokoro" (Google primary, Piper fallback, Kokoro last resort)
PODCAST_ENGINE_TTS_PROVIDER=google,piper,kokoro

# ============================================================================
# Google Cloud Text-to-Speech (Recommended Primary Provider)
# ============================================================================
# Pricing: 1M characters FREE per month, then $16/1M chars
# Quality: Excellent (Neural2 voices)
# Stability: 99.9% SLA, zero maintenance
# Setup: https://cloud.google.com/text-to-speech/docs/before-you-begin

# Google Cloud Project ID (required for Google TTS)
PODCAST_ENGINE_GOOGLE_CLOUD_PROJECT_ID=your-project-id

# Service account credentials (optional, base64-encoded JSON)
# If not provided, uses Application Default Credentials (ADC)
# To generate: cat service-account.json | base64 -w0
# PODCAST_ENGINE_GOOGLE_CLOUD_CREDENTIALS_JSON=eyJ0eXBlIjogInNlcnZpY2Vf...

# Google TTS voice (see: https://cloud.google.com/text-to-speech/docs/voices)
PODCAST_ENGINE_GOOGLE_TTS_VOICE=fr-FR-Neural2-A
PODCAST_ENGINE_GOOGLE_TTS_TIMEOUT=60

# ============================================================================
# Piper TTS via openedai-speech (Recommended Fallback)
# ============================================================================
# Self-hosted, CPU-optimized, stable
# Docker: ghcr.io/matatonic/openedai-speech-min:latest
# Performance: <1s latency, no GPU required

PODCAST_ENGINE_PIPER_TTS_URL=http://aistack-openedaispeech-c4c1sy:8000/v1/audio/speech
PODCAST_ENGINE_PIPER_TIMEOUT=60

# ============================================================================
# Kokoro TTS (Legacy - Memory Leak Known Issue)
# ============================================================================
# Self-hosted, good quality, but crashes after 7-9 chapters
# Use only as last resort fallback
# GitHub: https://github.com/remsky/Kokoro-FastAPI

PODCAST_ENGINE_KOKORO_TTS_URL=http://serverlabapps-kokorotts-skwerq:8880/v1/audio/speech
PODCAST_ENGINE_KOKORO_TIMEOUT=120

# ============================================================================
# Redis Queue (Job Persistence)
# ============================================================================
PODCAST_ENGINE_REDIS_HOST=projects-redis
PODCAST_ENGINE_REDIS_PORT=6379
PODCAST_ENGINE_REDIS_DB=0
# PODCAST_ENGINE_REDIS_PASSWORD=your-password  # Optional

# ============================================================================
# Storage Paths
# ============================================================================
PODCAST_ENGINE_STORAGE_BASE_PATH=/data/shared/podcasts
PODCAST_ENGINE_TEMP_DIR=/data/shared/podcasts/jobs
PODCAST_ENGINE_FINAL_DIR=/data/shared/podcasts/final

# ============================================================================
# Processing Limits
# ============================================================================
PODCAST_ENGINE_MAX_TEXT_LENGTH=5000000
PODCAST_ENGINE_MAX_CONCURRENT_JOBS=3
PODCAST_ENGINE_MAX_PARALLEL_TTS_CALLS=10

# ============================================================================
# API Configuration
# ============================================================================
PODCAST_ENGINE_API_HOST=0.0.0.0
PODCAST_ENGINE_API_PORT=8000
PODCAST_ENGINE_API_WORKERS=2
PODCAST_ENGINE_LOG_LEVEL=INFO
PODCAST_ENGINE_DEBUG=False

# ============================================================================
# Gemini API (Chaptering & Language Detection)
# ============================================================================
PODCAST_ENGINE_GEMINI_API_KEY=your-gemini-api-key
PODCAST_ENGINE_GEMINI_MODEL=gemini-2.0-flash-exp
PODCAST_ENGINE_GEMINI_FLASH_MODEL=gemini-2.0-flash-exp

# ============================================================================
# Optional: Security
# ============================================================================
# PODCAST_ENGINE_API_KEY=your-api-key  # Enable API authentication
# PODCAST_ENGINE_ENABLE_RATE_LIMITING=True
# PODCAST_ENGINE_RATE_LIMIT_PER_MINUTE=10
